!function(e,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports,require("@angular/core"),require("rxjs")):"function"==typeof define&&define.amd?define("angular-page-visibility",["exports","@angular/core","rxjs"],i):i((e=e||self)["angular-page-visibility"]={},e.ng.core,e.rxjs)}(this,function(e,i,n){"use strict";var t={VISIBLE:0,HIDDEN:1,PRERENDER:2,UNLOADED:3};t[t.VISIBLE]="VISIBLE",t[t.HIDDEN]="HIDDEN",t[t.PRERENDER]="PRERENDER",t[t.UNLOADED]="UNLOADED";var r=function(){function e(){}return e.DEFAULT="hidden",e.MS="msHidden",e.WEB_KIT="webkitHidden",e}();var o=function(){function e(){}return e.VISIBLE="visible",e.HIDDEN="hidden",e.PRERENDER="prerender",e.UNLOADED="unloaded",e}();var a=function(){function e(){this.onPageVisibleSource=new n.Subject,this.onPageHiddenSource=new n.Subject,this.onPagePrerenderSource=new n.Subject,this.onPageUnloadedSource=new n.Subject,this.onPageVisibilityChangeSource=new n.Subject,this.$onPageVisible=this.onPageVisibleSource.asObservable(),this.$onPageHidden=this.onPageHiddenSource.asObservable(),this.$onPagePrerender=this.onPagePrerenderSource.asObservable(),this.$onPageUnloaded=this.onPageUnloadedSource.asObservable(),this.$onPageVisibilityChange=this.onPageVisibilityChangeSource.asObservable(),this.addEventListenerVibilityChange()}return e.prototype.isPageVisible=function(){return o.VISIBLE===this.getVisibilityState()||!this.isHidden()},e.prototype.isPageHidden=function(){return o.HIDDEN===this.getVisibilityState()||this.isHidden()},e.prototype.isPagePrerender=function(){return o.PRERENDER===this.getVisibilityState()},e.prototype.isPageUnloaded=function(){return o.UNLOADED===this.getVisibilityState()},e.prototype.isHidden=function(){return document[this.hidden]},e.prototype.getVisibilityState=function(){return document[this.visibilityState]},e.prototype.defineBrowserSupport=function(){void 0!==document[r.DEFAULT]?(this.hidden=r.DEFAULT,this.visibilityChange="visibilitychange",this.visibilityState="visibilityState"):void 0!==document[r.MS]?(this.hidden=r.MS,this.visibilityChange="msvisibilitychange",this.visibilityState="msVisibilityState"):void 0!==document[r.WEB_KIT]&&(this.hidden=r.WEB_KIT,this.visibilityChange="webkitvisibilitychange",this.visibilityState="webkitVisibilityState")},e.prototype.addEventListenerVibilityChange=function(){var e=this;this.defineBrowserSupport(),document.addEventListener(this.visibilityChange,function(){switch(e.getVisibilityState()){case o.VISIBLE:e.onPageVisibilityChangeSource.next(t.VISIBLE),e.onPageVisibleSource.next();break;case o.HIDDEN:e.onPageVisibilityChangeSource.next(t.HIDDEN),e.onPageHiddenSource.next();break;case o.PRERENDER:e.onPageVisibilityChangeSource.next(t.PRERENDER),e.onPagePrerenderSource.next();break;case o.UNLOADED:e.onPageVisibilityChangeSource.next(t.UNLOADED),e.onPageUnloadedSource.next();break;default:e.isHidden()?(e.onPageVisibilityChangeSource.next(t.HIDDEN),e.onPageHiddenSource.next()):(e.onPageVisibilityChangeSource.next(t.VISIBLE),e.onPageVisibleSource.next())}},!1)},e.decorators=[{type:i.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[]},e.ngInjectableDef=i.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}();var s=[a],u=i.ReflectiveInjector.resolveAndCreate(s).get(a);var c=function(){function e(){}return e.decorators=[{type:i.NgModule,args:[{imports:[],declarations:[],providers:[a],exports:[]}]}],e}();e.AngularPageVisibilityModule=c,e.AngularPageVisibilityService=a,e.AngularPageVisibilityStateEnum=t,e.OnPageHidden=function(){return function(e,i,n){var t,r=n.value,o=e.ngOnInit;e.ngOnInit=function(){for(var e=this,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];t=u.$onPageHidden.subscribe(function(){return r.call(e)}),o&&o.call(this,i)};var a=e.ngOnDestroy;e.ngOnDestroy=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.unsubscribe(),a&&a.call(this,e)}}},e.OnPagePrerender=function(){return function(e,i,n){var t,r=n.value,o=e.ngOnInit;e.ngOnInit=function(){for(var e=this,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];t=u.$onPagePrerender.subscribe(function(){return r.call(e)}),o&&o.call(this,i)};var a=e.ngOnDestroy;e.ngOnDestroy=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.unsubscribe(),a&&a.call(this,e)}}},e.OnPageUnloaded=function(){return function(e,i,n){var t,r=n.value,o=e.ngOnInit;e.ngOnInit=function(){for(var e=this,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];t=u.$onPageUnloaded.subscribe(function(){return r.call(e)}),o&&o.call(this,i)};var a=e.ngOnDestroy;e.ngOnDestroy=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.unsubscribe(),a&&a.call(this,e)}}},e.OnPageVisibilityChange=function(){return function(e,i,n){var t,r=n.value,o=e.ngOnInit;e.ngOnInit=function(){for(var e=this,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];t=u.$onPageVisibilityChange.subscribe(function(i){return r.call(e,[i])}),o&&o.call(this,i)};var a=e.ngOnDestroy;e.ngOnDestroy=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.unsubscribe(),a&&a.call(this,e)}}},e.OnPageVisible=function(){return function(e,i,n){var t,r=n.value,o=e.ngOnInit;e.ngOnInit=function(){for(var e=this,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];t=u.$onPageVisible.subscribe(function(){return r.call(e)}),o&&o.call(this,i)};var a=e.ngOnDestroy;e.ngOnDestroy=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.unsubscribe(),a&&a.call(this,e)}}},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=angular-page-visibility.umd.min.js.map